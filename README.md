# Бот для хауса Sunset

Telegram-бот для приема анкет в хаус Sunset. Бот обрабатывает заявки от пользователей, проверяет их на соответствие требованиям и отправляет на рассмотрение администраторам.

## Функциональность

- Анкета с подробной информацией о пользователе
- Проверка требований (возраст 12+, Java-версия Minecraft)
- Уведомления администраторов о новых анкетах
- Автоматическое принятие заявок в чат при подтверждении администратором
- Управление принятыми и отклоненными анкетами
- Веб-интерфейс для мониторинга состояния бота

## Требования

- Node.js 16.x или выше
- NPM или Yarn

## Установка и запуск для локальной разработки

1. Клонируйте репозиторий:
```bash
git clone https://github.com/ChQynon/bot.git
cd bot
```

2. Установите зависимости:
```bash
npm install
```

3. Запустите бота:
```bash
npm start
```

## Команды бота

### Для пользователей
- `/start` - Начать заполнение анкеты
- `/cancel` - Отменить текущее заполнение анкеты

### Для администраторов
- `/list` - Просмотр списка непринятых анкет
- `/view_[ID]` - Просмотр полной анкеты пользователя по ID
- `/history_accepted` - Просмотр истории принятых анкет
- `/history_rejected` - Просмотр истории отклоненных анкет

## Настройка бота

Основная конфигурация бота находится в файле `bot.js`:

- `ADMIN_IDS` - массив ID администраторов
- `GROUP_CHAT_ID` - ID группового чата для принятых пользователей
- `GROUP_LINK` - ссылка на групповой чат

## Деплой на Vercel

### Использование One-Click Deploy

1. Нажмите на кнопку ниже, чтобы создать копию и развернуть на Vercel:

[![Развернуть с Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2FChQynon%2Fbot)

2. В настройках проекта на Vercel добавьте переменную окружения:
   - Ключ: `TELEGRAM_BOT_TOKEN`
   - Значение: `7417777601:AAGy92M0pjoizRHILNT7d72xMNf8a0BkKK8`

3. После деплоя вебхук будет настроен автоматически.

### Ручной деплой

1. Создайте аккаунт на [Vercel](https://vercel.com) если у вас его еще нет.

2. Установите Vercel CLI:
```bash
npm install -g vercel
```

3. Войдите в аккаунт Vercel:
```bash
vercel login
```

4. Разверните проект:
```bash
vercel
```

5. Убедитесь, что в настройках проекта на Vercel добавлена переменная окружения `TELEGRAM_BOT_TOKEN`.

### Проверка работы бота

После деплоя:

1. Откройте сайт вашего проекта на Vercel для просмотра веб-интерфейса
2. Добавьте бота в Telegram: [@sunset_AccessBot](https://t.me/sunset_AccessBot)
3. Отправьте команду `/start`

## Важные замечания

- **Время холодного старта**: На Vercel функции имеют холодный старт, поэтому первый запрос может занять больше времени.
- **Переменные окружения**: Проверьте, что `TELEGRAM_BOT_TOKEN` установлен правильно.
- **Дебаггинг**: Используйте логи на Vercel для отладки проблем (Vercel Dashboard > Project > Deployments > Logs).

## Лицензия

Этот проект является частной разработкой для хауса Sunset и не распространяется под открытой лицензией.

## Автор

Хаус Sunset 